[English](../CHANGELOG.md) | 中文文档

# 更新日志

## [1.2.0] - 2025-12-12

### 改进
- **架构优化**: 重构 `ConfigManager` 和 `WebviewHtmlBuilder` 以提升可测试性
  - 引入 `IConfigReader` 接口实现依赖注入
  - 移除核心模块对 `vscode` 模块的直接依赖
  - 核心业务逻辑现可在纯 Node.js 环境中进行单元测试
- **依赖注入**: `SidebarProvider` 现通过构造函数接收依赖，而非内部创建实例
- **CSP 安全优化**: 提取内联样式到外部 CSS 文件，移除 `'unsafe-inline'`

### 新增
- **新增单元测试**: 为 `ConfigManager` 和 `WebviewHtmlBuilder` 添加全面测试
  - `config_manager.test.ts`: 18 个新测试
  - `html_builder.test.ts`: 13 个新测试
  - 总计: 169 个测试通过

## [1.1.0] - 2025-12-11

### 新增
- **独立缓存轮询**: 缓存大小检查现独立运行，可配置间隔（`gagp.cacheCheckInterval`）
- **缓存警告通知**: 缓存超过阈值时自动警告，24 小时冷却防止刷屏
- **隐藏空文件夹选项**: 新设置项（`gagp.cacheHideEmptyFolders`）可隐藏 Brain 和 Code Tracker 树中的空文件夹

### 改进
- **智能缓存清理**: 保留最新 5 个 brain 任务及其对话，避免中断正在进行的工作
- **清理缓存对话框**: 添加"打开文件夹"按钮用于手动清理
- **删除确认**: Code Tracker 目录删除现显示确认对话框

### 修复
- **Code Tracker 删除按钮**: 修复因 Lit 属性反射问题导致删除按钮不工作的问题
- **删除后树刷新**: 修复文件/文件夹删除后目录树不刷新的问题

## [1.0.3] - 2025-12-10

### 新增
- **MVVM 架构**: 引入 QuotaViewModel 作为统一数据聚合层
- **活跃分组自动检测**: 基于配额消耗变化（>0.1% 阈值）自动检测活跃模型分组
- **缓存优先启动**: UI 立即从缓存渲染，然后异步刷新

### 修复
- **状态栏活跃分组**: 修复活跃分组显示错误（之前因简单字符串匹配导致显示错误分组）
- 修复扩展侧边栏和工具栏中的图标显示问题

## [1.0.2] - 2025-12-10

### 改进
- 扩展包体积减少 85%，加快安装和更新速度
- 提升扩展加载性能

## [1.0.1] - 2025-12-10

### 修复
- 修复配额预测显示在加载后消失的问题
- 修复启动时配额图表渲染问题

### 改进
- 增强代码质量和稳定性

## [1.0.0] - 2025-12-09

### 新增
- 首次发布
- 实时 Gemini API 配额监控，带可视化图表
- Gemini 对话缓存管理
- 快速访问 Gemini 配置文件
- 多语言支持（英语、中文、日语、韩语等）
- 可配置间隔的自动配额刷新
- 状态栏集成，显示当前配额使用情况

