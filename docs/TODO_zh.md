# 待办事项清单

> 最后更新: 2025-12-10
> 项目版本: v0.2.1

---

## 🔴 高优先级 (P0)

### 测试覆盖率提升

- [ ] **补充核心模块单元测试**（当前：113 个测试，~50% 覆盖率，目标：80%）
  - [ ] `HttpClient` - HTTPS→HTTP 降级、协议缓存
  - [ ] `StatusBarManager` - 状态栏更新
  - [ ] Webview 组件 - Lit 组件单元测试（使用 @web/test-runner）
  - [ ] `SidebarProvider` - Webview 消息处理（集成测试）

### 发布准备

- [ ] **发布到 VS Code Marketplace**
  - [x] 配置 GitHub Actions 自动发布工作流 ✅
  - [x] 支持发布到 VS Code Marketplace ✅
  - [x] 支持发布到 Open VSX Registry ✅
  - [x] 自动创建 GitHub Release ✅
  - [ ] 配置 GitHub Secrets（VSCE_PAT、OVSX_PAT）
  - [x] 完善 README 中的功能截图和使用说明 ✅
  - [ ] 准备 Marketplace 展示图片（至少 3 张）
  - [ ] 创建首个发布标签（v0.2.1）

---

## 🟡 中优先级 (P1)

### 新功能

- [ ] **配额预警通知**
  - 当配额低于 `gagp.quotaWarningThreshold` 时显示 VS Code 通知
  - 支持不同严重级别（警告/严重）
  - 可配置是否启用通知

- [ ] **基于时间的缓存过滤**
  - 添加"删除 X 天前的任务"选项
  - UI: 侧边栏工具栏中的日期选择器
  - 后端: 根据 `createdAt` 时间戳过滤

### 代码质量

- [ ] **添加 ESLint 规则检查**
  - 运行 `npm run lint` 检查代码规范
  - 修复所有 ESLint 警告和错误
  - 配置 pre-commit hook 自动检查

---

## 🟢 低优先级 (P2)

### 功能（未来版本）

- [ ] **自动清理**（来自 plan.md v0.3.0）
  - 自动删除 N 天前的任务
  - 可配置的保留策略
  - 试运行模式

- [ ] **高级配额分析**（来自 plan.md v0.3.0）
  - 消耗速率计算（配额/小时）
  - 预计耗尽时间（ETE）
  - 使用模式分析
  - 周报/月报

### UI/UX 改进

- [ ] **Webview 状态持久化**
  - 使用 `vscode.setState()` 保存 UI 状态
  - 重新加载时恢复展开/折叠的部分
  - 记住最后活跃的标签页

- [ ] **深色/浅色主题支持**
  - 确保所有自定义颜色遵循 VS Code 主题
  - 使用流行主题测试（One Dark、Solarized 等）

- [ ] **无障碍访问（a11y）**
  - 为交互元素添加 ARIA 标签
  - 键盘导航支持
  - 屏幕阅读器兼容性

### 性能优化

- [ ] **大型任务的延迟加载**
  - 按需加载任务文件（而非一次性全部加载）
  - 大型文件列表的虚拟滚动
  - 历史图表的分页

- [ ] **优化轮询机制**
  - 服务器不可用时使用指数退避
  - 扩展不可见时暂停轮询
  - 减少网络调用

---

## 📋 文档

- [ ] **添加贡献指南 (CONTRIBUTING.md)**
  - 开发环境设置说明
  - 代码风格指南
  - 测试要求
  - PR 提交流程

- [ ] **完善 JSDoc 注释**
  - 为所有公共 API 添加 JSDoc
  - 包含参数说明和返回值类型
  - 添加使用示例

---

## 🐛 已知问题

- [ ] **Webview CSP 警告**
  - 调查控制台中的内容安全策略警告
  - 确保所有资源正确配置 nonce

---

## 🔧 技术债务

- [ ] **改进错误处理**
  - 为网络请求失败添加用户友好的错误提示
  - 在 Output Channel 中记录详细错误信息
  - 避免在 UI 中暴露技术细节

---


