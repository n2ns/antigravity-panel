[English](TODO.md) | 中文文档

# 待办事项清单

> 最后更新: 2026-01-11

> ⚠️ **注意**: 本文档仅包含待办任务。已完成的任务应移除，并记录到 [CHANGELOG.md](../CHANGELOG.md) 或 [FEATURES.md](./FEATURES.md)。

---

## 🔴 高优先级 (P0)

### 测试覆盖率提升

- [ ] **持续保持高单元测试覆盖率**（目标：80%，当前：243 个测试）
  - [ ] `HttpClient` - HTTPS→HTTP 降级、协议缓存
  - [ ] `StatusBarManager` - 状态栏更新（需要 VS Code 集成测试）
  - [ ] `SidebarProvider` - Webview 消息处理（需要 VS Code 集成测试）
  - [ ] Webview 组件 - Lit 组件单元测试（使用 @web/test-runner）

---

## 🟡 中优先级 (P1)

### 新功能

- [ ] **配额预警通知**
  - 当配额低于阈值时显示 VS Code 通知
  - 支持不同严重级别（警告/严重）
  - 可配置是否启用通知

- [ ] **基于时间的缓存过滤**
  - 添加"删除 X 天前的任务"选项
  - UI: 侧边栏工具栏中的日期选择器
  - 后端: 根据 `createdAt` 时间戳过滤

### 代码质量

- [x] **配置 pre-commit hook** 自动 ESLint 检查并运行单元测试

---

## 🟢 低优先级 (P2)

### 功能（未来版本）

- [ ] **自动清理**
  - 自动删除 N 天前的任务
  - 可配置的保留策略
  - 试运行模式

- [x] **高级配额分析** (已在 v2.1.0 中实现)
  - 消耗速率计算（配额/小时）
  - 预计耗尽时间（ETE）
  - 使用模式分析

### UI/UX 改进

- [x] **深色/浅色主题支持** (已在 v2.2.0 中通过工业级仪表盘完善)
  - 确保所有自定义颜色遵循 VS Code 主题
  - 使用流行主题测试（One Dark、Solarized 等）

### 性能优化

- [ ] **大型任务的延迟加载**
  - 按需加载任务文件（而非一次性全部加载）
  - 大型文件列表的虚拟滚动
  - 历史图表的分页

- [ ] **轮询优化**
  - 扩展不可见时暂停轮询
  - 减少网络调用

---

## 📋 文档

- [ ] **添加贡献指南 (CONTRIBUTING.md)**
  - 开发环境设置说明
  - 代码风格指南
  - 测试要求
  - PR 提交流程

- [ ] **完善 JSDoc 注释**
  - 为所有公共 API 添加 JSDoc
  - 包含参数说明和返回值类型
  - 添加使用示例

---

## 🔧 技术债务

- [x] **改进错误处理** (第一阶段已在 v2.5.0 中完成)
  - 使用 `NodeJS.ErrnoException` 标准化错误处理逻辑
  - 提升了异步操作中的类型安全和错误捕获能力
  - 在 Output Channel 中记录详细错误信息（已为提交信息生成器实现）

- [x] **Webview 国际化支持** (已在 v2.1.0 中实现)
  - 实现了基于消息驱动的透传翻译方案

---
